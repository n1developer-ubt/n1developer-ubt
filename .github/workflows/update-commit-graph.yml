name: Update Commit Graph

on:
   schedule:
      - cron: "0 0 * * *" # Runs daily at midnight
   push:
      branches:
         - main # Change to your default branch if different

jobs:
   update-commit-graph:
      runs-on: ubuntu-latest
      steps:
         - name: Checkout repository
           uses: actions/checkout@v3

         - name: Setup Node.js
           uses: actions/setup-node@v3
           with:
              node-version: "14"

         - name: Run contribution action
           env:
              GH_TOKEN: ${{ secrets.GH_TOKEN }}
           run: |
              npx github-contribution-stats -u n1developer-ubt -t $GH_TOKEN --private --output contrib_data.json
              echo "## ðŸ“ˆ Yearly Commit Graph for 2023" > README.md
              cat contrib_data.json >> README.md

         - name: Commit and push if changed
           run: |
              git config --global user.name 'github-actions[bot]'
              git config --global user.email 'github-actions[bot]@users.noreply.github.com'
              git add README.md
              git commit -m 'Update commit graph' || echo "No changes to commit"
              git push
